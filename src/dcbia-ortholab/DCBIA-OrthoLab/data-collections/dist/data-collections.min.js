angular.module("data-collections",[]),angular.module("data-collections").factory("dcbia",["$q","$http","$location",function(a,b,c){return{getClinicalDataCollections:function(){return b({method:"GET",url:"/dcbia/clinical/collections"})},getClinicalDataCollection:function(a){return b({method:"GET",url:"/dcbia/clinical/collection/"+a})},createClinicalDataCollection:function(a){return b({method:"POST",url:"/dcbia/clinical/collection",data:a})},updateClinicalDataCollection:function(a){return b({method:"PUT",url:"/dcbia/clinical/collection",data:a})},deleteClinicalDataCollection:function(a){return b({method:"DELETE",url:"/dcbia/clinical/collection/"+a})},getAllClinicalData:function(){return b({method:"GET",url:"/dcbia/clinical/collection/data"})},getClinicalData:function(a){return b({method:"GET",url:"/dcbia/clinical/collection/data/"+a})},getClinicalDataOwners:function(){return b({method:"GET",url:"/dcbia/clinical/data/owner"})},getClinicalDataOwner:function(a){return b({method:"GET",url:"/dcbia/clinical/data/owner?email="+a})},createClinicalData:function(a){return b({method:"POST",url:"/dcbia/clinical/data",data:a})},updateClinicalData:function(a){return b({method:"PUT",url:"/dcbia/clinical/data",data:a})},deleteClinicalData:function(a){return b({method:"DELETE",url:"/dcbia/clinical/data/"+a})},getMorphologicalDataCollections:function(){return b({method:"GET",url:"/dcbia/morphological/collections"})},getMorphologicalDataCollection:function(a){return b({method:"GET",url:"/dcbia/morphological/collection/"+a})},createMorphologicalDataCollection:function(a){return b({method:"POST",url:"/dcbia/morphological/collection",data:a})},updateMorphologicalDataCollection:function(a){return b({method:"PUT",url:"/dcbia/morphological/collection",data:a})},deleteMorphologicalDataCollection:function(a){return b({method:"DELETE",url:"/dcbia/morphological/collection/"+a})},getAllMorphologicalData:function(){return b({method:"GET",url:"/dcbia/morphological/collection/data"})},getMorphologicalData:function(a){return b({method:"GET",url:"/dcbia/morphological/collection/data/"+a})},createMorphologicalData:function(a){return b({method:"POST",url:"/dcbia/morphological/data",data:a})},addAttachement:function(a,c,d){return b({method:"PUT",url:"/dcbia/"+a+"/"+c,data:d})},getAttachement:function(a,c,d){return b({method:"GET",url:"/dcbia/"+a+"/"+c,responseType:d})},updateMorphologicalData:function(a){return b({method:"PUT",url:"/dcbia/morphological/data",data:a})},deleteMorphologicalData:function(a){return b({method:"DELETE",url:"/dcbia/morphological/data/"+a})},getMorphologicalDataByPatientId:function(a){return b({method:"GET",url:"/dcbia/morphological/data/patientId/"+a})},getProjects:function(){return b({method:"GET",url:"/dcbia/projects"})},getProject:function(a){return b({method:"GET",url:"/dcbia/project/"+a})},createProject:function(a){return b({method:"POST",url:"/dcbia/projects",data:a})},updateProject:function(a){return b({method:"PUT",url:"/dcbia/projects",data:a})},deleteProject:function(a){return b({method:"DELETE",url:"/dcbia/project/"+a})},getMorphologicalDataByCollectionIdPatientId:function(a,c){return b({method:"GET",url:"/dcbia/morphological/data/"+a+"/patient/"+c})}}}]),angular.module("data-collections").directive("clinicalData",["$routeParams","dcbia","clusterauth",function($routeParams,dcbia,clusterauth){function link($scope,$attrs,$filter){clusterauth.getUser().then(function(a){$scope.user=a}),$scope.clinicalDataSectionDisplay={},$scope.clinicalDataCollection={showCreate:!1,newCollection:{items:[],type:"clinicalDataCollection",name:""},collections:[],collectionsProperties:{defaultClinicalDataCollection:{class:""}},selectedForm:-1},$scope.defaultClinicalDataCollection={_id:"defaultClinicalDataCollection",name:"All clinical data",type:"clinicalDataCollection",items:0},$scope.clinicalDataCollection.getClinicalDataCollections=function(){return dcbia.getClinicalDataCollections().then(function(a){delete $scope.clinicalDataCollection.selectedCollection,$scope.clinicalDataCollection.collections=a.data,_.each($scope.clinicalDataCollection.collections,function(a){$scope.clinicalDataCollection.collectionsProperties[a._id]={class:""}})}).catch(console.error)},$scope.clinicalDataCollection.create=function(a){dcbia.createClinicalDataCollection(a).then(function(a){$scope.clinicalDataCollection.getClinicalDataCollections()}).catch(console.error)},$scope.clinicalDataCollection.selectCollection=function(a){$scope.clinicalDataCollection.selectedCollection&&($scope.clinicalDataCollection.collectionsProperties[$scope.clinicalDataCollection.selectedCollection._id].class=""),$scope.clinicalDataCollection.selectedCollection=a,$scope.clinicalDataCollection.collectionsProperties[a._id].class="alert alert-info"},$scope.clinicalDataCollection.getDataCollectionKeys=function(a){var b={};return _.each(a,function(a){_.extend(b,a)}),b._id&&delete b._id,b._rev&&delete b._rev,b.scope&&!b.scope.isArray&&delete b.scope,b.attachments&&delete b.attachments,_.keys(b)},$scope.clinicalDataCollection.select=function(a){$scope.clinicalDataCollection.selectCollection(a);var b;return b="defaultClinicalDataCollection"===a._id?dcbia.getAllClinicalData().then(function(a){return $scope.defaultClinicalDataCollection.items=_.map(a.data,function(a){return a.patientId||(a.patientId="null"),{_id:a._id}}),a}):dcbia.getClinicalData(a._id),b.then(function(a){var b=a.data;$scope.clinicalDataCollection.selectedCollectionData=b,$scope.clinicalDataCollection.selectedCollectionDataKeys=$scope.clinicalDataCollection.getDataCollectionKeys(b)}).catch(console.error)},$scope.clinicalDataCollection.delete=function(a){confirm("Are you sure you want to delete the collection?")&&dcbia.deleteClinicalDataCollection(a._id).then(function(a){return $scope.clinicalDataCollection.getClinicalDataCollections()}).catch(console.error)},$scope.clinicalDataCollection.refreshSelectedCollection=function(){$scope.clinicalDataCollection.select($scope.clinicalDataCollection.selectedCollection).then(function(a){return dcbia.getClinicalDataCollection($scope.clinicalDataCollection.selectedCollection._id).then(function(a){$scope.clinicalDataCollection.selectedCollection=a.data,$scope.clinicalDataCollection.collections=_.map($scope.clinicalDataCollection.collections,function(a){return a._id===$scope.clinicalDataCollection.selectedCollection._id?$scope.clinicalDataCollection.selectedCollection:a})})})},$scope.clinicalDataCollection.addClinicalData=function(a){$scope.clinicalDataCollection.selectCollection(a)},$scope.clinicalDataCollection.update=function(a){return dcbia.updateClinicalDataCollection(a).then(function(b){a._rev=b.data.rev})},$scope.clinicalDataCollection.selectForm=function(a){-1===$scope.clinicalDataCollection.selectedForm?$scope.clinicalDataCollection.selectedForm=a:$scope.clinicalDataCollection.selectedForm!==a&&confirm("You will lose the current changes in this form. Do you want to continue?")&&($scope.clinicalDataCollection.selectedForm=a)},$scope.clinicalDataCollection.getClinicalDataCollections().then(function(){if($routeParams.collectionId){var a=_.find($scope.clinicalDataCollection.collections,function(a){return a._id===$routeParams.collectionId});return $scope.clinicalDataCollection.showSection=0,$scope.clinicalDataCollection.select(a)}}).catch(console.error),$scope.clinical={data:{}},$scope.clinical.clearForm=function(a){if(a||(a=confirm("Do you want to clear the current changes?")),a){$scope.clinical.data={},$scope.clinical.data.formId="";var b=new Date,c=b.getFullYear(),d=b.getMonth()+1>=10?b.getMonth()+1:"0"+(b.getMonth()+1),e=b.getDate()>=10?b.getDate():"0"+b.getDate();$scope.clinical.data.date=c+"-"+d+"-"+e}},$scope.clinical.create=function(){var a=$scope.clinicalDataCollection.selectedCollection;a?$scope.clinical.data&&($scope.clinical.data=$scope.clinical.checkProblemsAnswers($scope.clinical.data),$scope.clinical.createClinicalData($scope.clinical.data).then(function(b){return a.items.push({_id:b.data.id}),$scope.clinicalDataCollection.update(a)}).catch(console.error)):alert("You need to select a collection first!")},$scope.clinical.createClinicalData=function(a){return a.type="clinicalData",dcbia.createClinicalData(a).catch(console.error)},$scope.clinical.deleteAllFiltered=function(a){confirm("Do you want to delete the items beign displayed?")&&Promise.all(_.map(a,function(a){return $scope.clinicalDataCollection.selectedCollection.items.splice(_.findIndex($scope.clinicalDataCollection.selectedCollection.items,{_id:a._id}),1),dcbia.deleteClinicalData(a._id)})),$scope.clinicalDataCollection.update($scope.clinicalDataCollection.selectedCollection),$scope.clinicalDataCollection.select($scope.clinicalDataCollection.selectedCollection)},$scope.clinical.delete=function(a){if(confirm("Do you want to delete the current item?"))return dcbia.deleteClinicalData(a._id).then(function(){$scope.clinicalDataCollection.refreshSelectedCollection()})},$scope.clinical.edit=function(a){$scope.clinical.dataEdit=_.clone(a)},$scope.clinical.update=function(a){a=$scope.clinical.checkProblemsAnswers(a),dcbia.updateClinicalData(a).then(function(a){$scope.clinical.showSection=-1,$scope.clinicalDataCollection.select($scope.clinicalDataCollection.selectedCollection)})},$scope.clinical.checkProblemsAnswers=function(a){var b=["problemOrPreventChewing","problemOrPreventDrinking","problemOrPreventExercising","problemOrPreventEatingHardFoods","problemOrPreventEatingSoftFoods","problemOrPreventSmilingLaughing","problemOrPreventSexualActivity","problemOrPreventCleaningTeethOrFace","problemOrPreventYawning","problemOrPreventSwallowing","problemOrPreventTalking","problemOrPreventHavingUsualFaceAppearance"],c=[];return _.each(b,function(b){c.push(a[b])}),-1!==c.indexOf(!0)&&_.each(c,function(c,d){a[b[d]]=c?"yes":"no"}),a},$scope.csv={},$scope.$watch("csv.file",function(){$scope.csv.file&&$scope.csv.readFile().then(function(){$scope.$apply()})}),$scope.csv.readFile=function(){return $scope.csv.open($scope.csv.file).then(function(a){var b={};_.each(a,function(a){_.extend(b,a)}),void 0===b.patientId&&($scope.csv.selectPatientId=!0),b=_.keys(b),$scope.csv.selectedCollectionData=a,$scope.csv.selectedCollectionDataKeys=b})},$scope.csv.open=function(a){return new Promise(function(b,c){var d=new FileReader;d.onload=function(a){var c=a.target.result;-1===c.indexOf("\r\n")&&-1!==c.indexOf("\r")&&(c=c.replace(new RegExp("\r","g"),"\n")),b($scope.csv.JSON(c))},d.onerror=function(a){c(a)},d.readAsText(a)})},$scope.csv.camelize=function(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return 0!=b||isNaN(parseInt(a))?0==b?a.toLowerCase():a.toUpperCase():""}).replace(/\s+|[-()\/]/g,"")},$scope.csv.JSON=function(csv){var lines=csv.split("\n"),result=[];if(lines.length>0)for(var headers=_.map(lines[0].split(","),function(val){try{return eval(val)}catch(a){return _.isString(val)?$scope.csv.camelize(val):val}}),i=1;i<lines.length;i++){for(var obj={},currentline=lines[i].split(","),j=0;j<headers.length;j++)obj[headers[j]]=currentline[j];result.push(obj)}return result},$scope.csv.create=function(){$scope.csv.selectPatientId&&!$scope.csv.selectedPatientId?alert("Please select a patientId from the available column headers!"):Promise.all(_.map($scope.csv.selectedCollectionData,function(a){var b=_.clone(a);if($scope.csv.selectPatientId&&(b.patientId=a[$scope.csv.selectedPatientId],delete b[$scope.csv.selectedPatientId]),void 0===b.owner&&(b.owner=$scope.user.email),void 0===b.formId&&(b.formId="imported-csv"),void 0===b.date){var c=new Date,d=c.getFullYear(),e=c.getMonth()+1>=10?c.getMonth()+1:"0"+(c.getMonth()+1),f=c.getDate()>=10?c.getDate():"0"+c.getDate();b.date=d+"-"+e+"-"+f}return $scope.clinical.createClinicalData(b)})).then(function(a){return _.each(_.pluck(a,"data"),function(a){$scope.clinicalDataCollection.selectedCollection.items.push({_id:a.id})}),$scope.clinicalDataCollection.update($scope.clinicalDataCollection.selectedCollection)}).then(function(a){return delete $scope.csv.selectedCollectionData,delete $scope.csv.selectedCollectionDataKeys,$scope.clinicalDataCollection.select($scope.clinicalDataCollection.selectedCollection)}).catch(console.error)},$scope.csv.export=function(a){var b;b=$scope.clinicalDataCollection.selectedCollection&&a._id===$scope.clinicalDataCollection.selectedCollection._id?Promise.resolve(!0):$scope.clinicalDataCollection.select(a),b.then(function(){var a=$scope.clinicalDataCollection.getDataCollectionKeys($scope.clinicalDataCollection.selectedCollectionData),b=a.toString();b+="\n",_.each($scope.clinicalDataCollection.selectedCollectionData,function(c,d){_.each(a,function(d,e){var f;Array.isArray(c[d])?_.each(c[d],function(a,b){0===b?f=a||"":f+=" "+(a||"")}):f=void 0===c[d]||null===c[d]?"":c[d].toString()?c[d].toString():"",b+=f,e<a.length-1&&(b+=",")}),d<$scope.clinicalDataCollection.selectedCollectionData.length-1&&(b+="\n")});var c=$scope.clinicalDataCollection.selectedCollection.name;return-1===$scope.clinicalDataCollection.selectedCollection.name.indexOf("csv")&&(c+=".csv"),$scope.csv.download(c,b)})},$scope.csv.download=function(a,b){var c=document.createElement("a"),d=new Blob([b],{type:"text/plain"});c.setAttribute("href",window.URL.createObjectURL(d)),c.setAttribute("download",a),c.dataset.downloadurl=["text/plain",c.download,c.href].join(":"),c.click()}}return{restrict:"E",link:link,templateUrl:"./src/clinicalData.template.html"}}]),angular.module("data-collections").directive("morphologicalData",["$routeParams","dcbia","clusterauth",function(a,b,c){function d(d,e,f){c.getUser().then(function(a){d.user=a}),d.morphologicalDataSectionDisplay={section:0},d._=_,d.morphologicalDataCollection={newCollection:{items:[],type:"morphologicalDataCollection",name:""},collections:[],collectionsProperties:{defaultMorphologicalDataCollection:{class:""}},section:-1},d.morphologicalData={data:{}},d.defaultMorphologicalDataCollection={_id:"defaultMorphologicalDataCollection",name:"All morphological data",type:"morphologicalDataCollection",items:0},d.csv={},d.$watch("csv.file",function(){d.csv.file&&d.csv.readFile().then(function(){d.$apply()})}),d.morphologicalDataCollection.getMorphologicalDataCollections=function(){return b.getMorphologicalDataCollections().then(function(a){delete d.morphologicalDataCollection.selectedCollection,d.morphologicalDataCollection.collections=a.data,_.each(d.morphologicalDataCollection.collections,function(a){d.morphologicalDataCollection.collectionsProperties[a._id]={class:""}})}).catch(console.error)},d.morphologicalDataCollection.create=function(a){b.createMorphologicalDataCollection(a).then(function(a){return d.morphologicalDataCollection.getMorphologicalDataCollections()}).catch(console.error)},d.morphologicalDataCollection.update=function(a){return b.updateMorphologicalDataCollection(a).then(function(a){return d.morphologicalDataCollection.refreshSelectedCollection()}).catch(console.error)},d.morphologicalDataCollection.selectCollection=function(a){d.morphologicalDataCollection.selectedCollection&&(d.morphologicalDataCollection.collectionsProperties[d.morphologicalDataCollection.selectedCollection._id].class=""),d.morphologicalDataCollection.selectedCollection=a,d.morphologicalDataCollection.collectionsProperties[a._id].class="alert alert-info"},d.morphologicalDataCollection.refreshSelectedCollection=function(){return d.morphologicalDataCollection.select(d.morphologicalDataCollection.selectedCollection).then(function(a){return b.getMorphologicalDataCollection(d.morphologicalDataCollection.selectedCollection._id).then(function(a){d.morphologicalDataCollection.selectedCollection=a.data,d.morphologicalDataCollection.collections=_.map(d.morphologicalDataCollection.collections,function(a){return a._id===d.morphologicalDataCollection.selectedCollection._id?d.morphologicalDataCollection.selectedCollection:a})})})},d.morphologicalDataCollection.getDataCollectionKeys=function(a){var b={};return _.each(a,function(a){_.extend(b,a)}),b._id&&delete b._id,b._rev&&delete b._rev,b._attachments&&delete b._attachments,b.attachments={},_.keys(b)},d.morphologicalDataCollection.select=function(a){d.morphologicalDataCollection.selectCollection(a);var c;return c="defaultMorphologicalDataCollection"===a._id?b.getAllMorphologicalData().then(function(a){return d.defaultMorphologicalDataCollection.items=_.map(a.data,function(a){return a.patientId||(a.patientId="null"),{_id:a._id}}),a}):b.getMorphologicalData(a._id),c.then(function(a){var b=a.data;d.morphologicalDataCollection.selectedCollectionData=_.map(b,function(a){return a._attachments&&_.extend(a,{attachments:_.keys(a._attachments)}),a}),d.morphologicalDataCollection.selectedCollectionDataKeys=d.morphologicalDataCollection.getDataCollectionKeys(b)}).catch(console.error)},d.morphologicalDataCollection.delete=function(a){confirm("Are you sure you want to delete the collection?")&&b.deleteMorphologicalDataCollection(a._id).then(function(a){return d.morphologicalDataCollection.getMorphologicalDataCollections()}).catch(console.error)},d.morphologicalDataCollection.addMorphologicalData=function(a,c){var e;if(a)e=Promise.resolve({data:{id:a._id}});else{if(void 0==d.morphologicalData.data.date)var f=new Date;else var f=d.morphologicalData.data.date;var g=f.getFullYear(),h=f.getMonth()+1>=10?f.getMonth()+1:"0"+(f.getMonth()+1),i=f.getDate()>=10?f.getDate():"0"+f.getDate();d.morphologicalData.data.date=g+"-"+h+"-"+i;var a={patientId:d.morphologicalData.data.patientId,date:d.morphologicalData.data.date,scope:[],owners:[],type:"morphologicalData"};a.owners.push({user:d.user.email}),e=b.createMorphologicalData(a).then(function(a){return b.addAttachement(a.data.id,d.morphologicalData.data.file.name,d.morphologicalData.data.file)}).then(function(a){d.morphologicalData.clear()})}return e.then(function(a){return-1==_.indexOf(d.morphologicalDataCollection.selectedCollection.items,function(b){return a.data.id==b._id})&&(d.morphologicalDataCollection.selectedCollection.items.push({_id:a.data.id}),c)?b.updateMorphologicalDataCollection(d.morphologicalDataCollection.selectedCollection).then(function(){return d.morphologicalDataCollection.refreshSelectedCollection()}):Promise.resolve()}).catch(function(a){alert(JSON.stringify(a))})},d.morphologicalDataCollection.addAllMorphologicalData=function(){return Promise.all(_.map(d.morphologicalDataCollection.displayedCollectionDataSelect,function(a){return d.morphologicalDataCollection.addMorphologicalData(a,!1)})).then(function(a){return b.updateMorphologicalDataCollection(d.morphologicalDataCollection.selectedCollection)}).then(function(a){return d.morphologicalDataCollection.refreshSelectedCollection()}).catch(function(a){console.error(a)})},d.morphologicalDataCollection.getAllMorphologicalDataSelect=function(){return b.getAllMorphologicalData().then(function(a){d.morphologicalDataCollection.collectionDataSelectInCollection={},_.each(d.morphologicalDataCollection.selectedCollectionData,function(a){d.morphologicalDataCollection.collectionDataSelectInCollection[a._id]=!0}),d.morphologicalDataCollection.collectionDataSelect=_.map(a.data,function(a){return a._attachments&&_.extend(a,{attachments:_.keys(a._attachments)}),a}),d.morphologicalDataCollection.collectionDataSelectKeys=d.morphologicalDataCollection.getDataCollectionKeys(d.morphologicalDataCollection.collectionDataSelect)}).catch(console.error)},d.morphologicalDataCollection.getMorphologicalDataCollections().then(function(){if(a.collectionId){var b=_.find(d.morphologicalDataCollection.collections,function(b){return b._id===a.collectionId});return d.morphologicalDataCollection.section=0,d.morphologicalDataCollection.select(b)}}).catch(console.error),d.morphologicalData.remove=function(a,b,c){if(b||confirm("Do you want to remove the current item?")){var e=_.indexOf(d.morphologicalDataCollection.selectedCollection.items,function(b){return b._it===a._id});if(d.morphologicalDataCollection.selectedCollection.items.splice(e,1),c)return d.morphologicalDataCollection.update(d.morphologicalDataCollection.selectedCollection).then(function(){return d.morphologicalDataCollection.refreshSelectedCollection()})}return Promise.resolve(!0)},d.morphologicalData.delete=function(a,c,e){if(c||confirm("Do you want to delete the current item?"))return b.deleteMorphologicalData(a._id).then(function(){return d.morphologicalData.remove(a,!0,e)})},d.morphologicalData.removeAll=function(){if(confirm("Do you want to remove all the displayed items from the collection?"))return Promise.all(_.map(d.morphologicalDataCollection.displayedCollection,function(a){return d.morphologicalData.remove(a,!0,!1)})).then(function(a){return d.morphologicalDataCollection.update(d.morphologicalDataCollection.selectedCollection)}).then(function(a){return d.morphologicalDataCollection.refreshSelectedCollection()}).then(function(a){console.log(a)})},d.morphologicalData.deleteAll=function(){if(confirm("Do you want to delete all the displayed items?"))return Promise.all(_.map(d.morphologicalDataCollection.displayedCollection,function(a){return d.morphologicalData.delete(a,!0,!1)})).then(function(a){return d.morphologicalDataCollection.update(d.morphologicalDataCollection.selectedCollection)}).then(function(a){return d.morphologicalDataCollection.refreshSelectedCollection()}).then(function(a){console.log(a)})},d.morphologicalData.clear=function(){d.morphologicalData.data={}},d.morphologicalData.viewAttachment=function(a,c){d.morphologicalData.surface=null,b.getAttachement(a._id,c,"arraybuffer").then(function(a){d.morphologicalData.surface=a.data})},d.csv.export=function(a){var b;b=d.morphologicalDataCollection.selectedCollection&&a._id===d.morphologicalDataCollection.selectedCollection._id?Promise.resolve(!0):d.morphologicalDataCollection.select(a),b.then(function(){var a=d.morphologicalDataCollection.getDataCollectionKeys(d.morphologicalDataCollection.selectedCollectionData),b=a.toString();b+="\n",_.each(d.morphologicalDataCollection.selectedCollectionData,function(c,e){_.each(a,function(d,e){var f;if(Array.isArray(c[d])){var g={};_.each(c[d],function(a,b){"object"==typeof a?(g=Object.keys(a),_.each(g,function(c,d){0===b&&0===d?f=a[c]?a[c]:"":f+=" "+(a[c]?a[c]:"")})):0===b?f=a||"":f+=" "+(a||"")})}else f=c[d]?c[d]:"";b+=f,e<a.length-1&&(b+=",")}),e<d.morphologicalDataCollection.selectedCollectionData.length-1&&(b+="\n")});var c=d.morphologicalDataCollection.selectedCollection.name;return-1===d.morphologicalDataCollection.selectedCollection.name.indexOf("csv")&&(c+=".csv"),d.csv.download(c,b)})},d.csv.download=function(a,b){var c=document.createElement("a"),d=new Blob([b],{type:"text/plain"});c.setAttribute("href",window.URL.createObjectURL(d)),c.setAttribute("download",a),c.dataset.downloadurl=["text/plain",c.download,c.href].join(":"),c.click()}}return{restrict:"E",link:d,templateUrl:"./src/morphologicalData.template.html"}}]),angular.module("data-collections").run(["$templateCache",function(a){"use strict"
;a.put("./src/clinicalData.template.html",'\n\n<div class="row">\n\t<div class="panel panel-default">\n  \t\t<div class="panel-body">\n\t\t\t<div class="col-md-12">\n\t\t\t\t<div class="btn-group">\n\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showCreate = true">\n\t\t\t\t \t<span class="glyphicon glyphicon-plus"></span>\n\t\t\t\t \tNew Collection\n\t\t\t\t </button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="row" ng-if="clinicalDataCollection.showCreate">\n\t<div class="panel panel-success">\n\t  <div class="panel-body">\n\t  \t<div class="input-group">\n  \t\t\t<span class="input-group-addon">Name</span>\n  \t\t\t<input type="text" class="form-control" placeholder="Collection name" aria-describedby="basic-addon3" ng-model="clinicalDataCollection.newCollection.name">\n  \t\t</div>\n  \t\t<div class="btn-group">\n\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.create(clinicalDataCollection.newCollection);clinicalDataCollection.showCreate=false">\n\t\t\t \t<span class="glyphicon glyphicon-ok"></span>\n\t\t\t \tCreate\n\t\t\t </button>\n\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showCreate = false">\n\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n\t\t\t \tCancel\n\t\t\t </button>\n\t\t\t</div>\n\t  </div>\n\t</div>\n</div>\n\n<div class="row" ng-if="!clinicalDataCollection.showCreate">\n\t<div class="panel panel-default">\n  \t\t<div class="panel-body">\n  \t\t\t<div class="col-sm-6 col-md-4">\n\t\t\t\t<div ng-class="clinicalDataCollection.collectionsProperties[\'defaultClinicalDataCollection\'].class">\n\t\t\t\t    <div class="thumbnail">\n\t\t\t\t    \t\x3c!-- <img src="" alt=""> --\x3e\n\t\t\t\t      <div class="caption">\n\t\t\t\t        <h3>{{defaultClinicalDataCollection.name}}</h3>\n\t\t\t\t        <p>\n\t\t\t\t        \t<b>Number of items: </b> {{defaultClinicalDataCollection.items.length}}\n\t\t\t\t        </p>\n\t\t\t        \t<div class="btn-group">\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.select(defaultClinicalDataCollection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-refresh"></span>\n\t\t\t\t\t\t </button>\n\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="csv.export(defaultClinicalDataCollection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-download"></span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t\t \n\t\t\t\t\t\t</div>\n\t\t\t\t      </div>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-6 col-md-4" ng-repeat="collection in clinicalDataCollection.collections">\n\t\t\t\t<div ng-class="clinicalDataCollection.collectionsProperties[collection._id].class">\n\t\t\t\t    <div class="thumbnail">\n\t\t\t\t    \t\x3c!-- <img src="" alt=""> --\x3e\n\t\t\t\t      <div class="caption">\n\t\t\t\t        <h3>{{collection.name}}</h3>\n\t\t\t\t        <p>\n\t\t\t\t        \t<b>Number of items: </b> {{collection.items.length}}\n\t\t\t\t        </p>\n\t\t\t        \t<div class="btn-group">\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showSection = 0;clinicalDataCollection.select(collection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-eye-open"></span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showSection = 1;clinicalDataCollection.addClinicalData(collection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-plus-sign"></span>\n\t\t\t\t\t\t </button>\n\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="csv.export(collection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-download"></span>\n\t\t\t\t\t\t </button>\n\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.select(collection);clinicalDataCollection.showSection = 2">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-signal"></span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t\t \n\t\t\t\t\t\t <button type="button" class="btn btn-danger" ng-click="clinicalDataCollection.showSection = -1;clinicalDataCollection.delete(collection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove-sign"></span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t\t</div>\n\t\t\t\t      </div>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="panel panel-info" ng-if="clinicalDataCollection.showSection == 0">\n\t\t<div class="panel panel-default" ng-if="user.scope.indexOf(\'admin\') !== -1">\n\t  \t\t<div class="panel-body">\n\t  \t\t\t<div class="btn-group">\n\t\t\t\t\t <button type="button" class="btn btn-danger" ng-click="clinical.deleteAllFiltered(clinicalDataCollection.displayedCollection)">\n\t\t\t\t\t \tRemoves all filtered<span class="glyphicon glyphicon-remove"></span>\n\t\t\t\t\t </button>\n\t\t\t\t</div>\n\t  \t\t</div>\n\t  \t</div>\n\t\t<div class="panel panel-default" style="overflow:scroll">\n\t  \t\t<div class="panel-body">\n\t  \t\t\t<table st-table="clinicalDataCollection.displayedCollection" st-safe-src="clinicalDataCollection.selectedCollectionData" class="table table-striped">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th ng-repeat="key in clinicalDataCollection.selectedCollectionDataKeys" st-sort="{{key}}" ng-if="key != \'scope\'">{{key}}</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th ng-repeat="key in clinicalDataCollection.selectedCollectionDataKeys" ng-if="key != \'scope\'">\n\t\t\t\t\t\t\t\t<input st-search="{{key}}" placeholder="search for {{key}}" class="input-sm form-control" type="search"/>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr ng-repeat="row in clinicalDataCollection.displayedCollection">\n\t\t\t\t\t\t\t<td ng-repeat="key in clinicalDataCollection.selectedCollectionDataKeys" ng-if="key != \'scope\'">{{row[key]}}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-info" ng-click="clinical.showSection = 0;clinical.edit(row)">\n\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-pencil"></span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger" ng-click="clinical.delete(row)">\n\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n\t\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t  \t\t</div>\n\t  \t</div>\n\t\t<div class="panel panel-default" ng-if="clinical.showSection == 0">\n\t  \t\t<div class="panel-body">\n\t  \t\t\t<div class="panel panel-default">\n\t  \t\t\t\t<div class="panel-body">\n\t  \t\t\t\t\t<div class="btn-group">\n\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinical.update(clinical.dataEdit)">\n\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-upload"></span>\n\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinical.showSection = -1">\n\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t</div>\n\t  \t\t\t\t</div>\n\t  \t\t\t</div>\n\t  \t\t\t<div class="panel panel-default">\n\t  \t\t\t\t<div class="panel-body">\n\t  \t\t\t\t\t<tmj-survey form-data="clinical.dataEdit" ng-if="clinical.dataEdit.formId == \'TMJSurvey\'"></tmj-survey>\n\t  \t\t\t\t</div>\n\t  \t\t\t</div>\n\n\t  \t\t\t<div class="panel panel-default">\n\t  \t\t\t\t<div class="panel-body">\n\t  \t\t\t\t\t<div class="btn-group">\n\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinical.update(clinical.dataEdit)">\n\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-upload">Update</span>\n\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinical.showSection = -1">\n\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove">Cancel</span>\n\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t</div>\n\t  \t\t\t\t</div>\n\t  \t\t\t</div>\n\t  \t\t\t\n\t  \t\t</div>\n\t  \t</div>\n\t\t\n\t</div>\n\n\t<div class="panel panel-default" ng-if="clinicalDataCollection.showSection == 1">\n\t  <div class="panel-body">\n\t  \t\n\t  \t<div class="panel panel-default">\n\t\t  <div class="panel-body">\n\t  \t\t<div class="btn-group">\n\n\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.selectForm(2)">\n\t\t\t\t \t<span class="glyphicon glyphicon-list-alt"></span>\n\t\t\t\t \tTMJ Survey\n\t\t\t\t </button>\n\n\t\t\t\t <label class="btn btn-default" for="clinicalData-file-selector" ng-click="clinicalDataCollection.selectedForm = 100">\n\t\t\t\t \t<span class="glyphicon glyphicon-folder-open"></span>\n\t\t\t\t    <input id="clinicalData-file-selector" file-model=\'csv.file\' type="file" style="display:none;">\n\t\t\t\t</label>\n\n\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showAddClinicalData = false;clinicalDataCollection.selectedForm = -1">\n\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n\t\t\t\t \tCancel\n\t\t\t\t </button>\n\t\t  \t</div>\n\t\t  </div>\n\t\t</div>\n\n\t  \t<div class="panel panel-info" ng-if="clinicalDataCollection.selectedForm === 2">\n\t\t  <div class="panel-body">\n\t\t  \t<div class="btn-group">\n\t\t  \t\t<button type="button" class="btn btn-default" ng-click="clinical.clearForm(false)">\n\t\t\t\t\t<span class="glyphicon glyphicon-minus"></span>\n\t\t\t\t\tClear\n\t\t\t\t</button>\n\t\t\t\t<button type="button" class="btn btn-default" ng-click="clinical.create();clinical.clearForm(true);clinicalDataCollection.selectedForm = -1">\n\t\t\t\t\t<span class="glyphicon glyphicon-save"></span>\n\t\t\t\t\tSubmit\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<tmj-survey form-data="clinical.data" ng-if="clinicalDataCollection.selectedForm == 2"></tmj-survey>\n\t\t\t<div class="btn-group">\n\t\t\t\t<button type="button" class="btn btn-default" ng-click="clinical.create();clinical.clearForm(true);clinicalDataCollection.selectedForm = -1">\n\t\t\t\t\t<span class="glyphicon glyphicon-save"></span>\n\t\t\t\t\tSubmit\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t  </div>\n\t\t</div>\n\n\t\t<div class="panel panel-info" style="overflow:scroll" ng-if="clinicalDataCollection.selectedForm == 100 && csv.selectedCollectionData">\n\t  \t\t<div class="panel-body">\n\n\t  \t\t\t<div class="btn-group col-md-3">\n\t\t\t\t\t<button type="button" class="btn btn-default" ng-click="csv.create()">\n\t\t\t\t\t \t<span class="glyphicon glyphicon-save"></span>\n\t\t\t\t\t \tSave\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="input-group col-md-6" ng-if="csv.selectPatientId">\n\t\t\t\t\t<span class="input-group-addon" id="sizing-addon2">patientId:</span>\n\t\t\t\t\t<select ng-model="csv.selectedPatientId" class="form-control">\n\t\t\t\t\t\t<option ng-repeat="key in csv.selectedCollectionDataKeys">{{key}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\n\t\t\t  \t<table st-table="csv.displayedCollection" st-safe-src="csv.selectedCollectionData" class="table table-striped" >\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th ng-repeat="key in csv.selectedCollectionDataKeys" st-sort="{{key}}">{{key}}</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th ng-repeat="key in csv.selectedCollectionDataKeys">\n\t\t\t\t\t\t\t\t<input st-search="{{key}}" placeholder="search for {{key}}" class="input-sm form-control" type="search"/>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr ng-repeat="row in csv.displayedCollection">\n\t\t\t\t\t\t\t<td ng-repeat="key in csv.selectedCollectionDataKeys">{{row[key]}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t  </div>\n\t</div>\n\t<div class="panel panel-default" ng-if="clinicalDataCollection.showSection == 2">\n\t  <div class="panel-body">\n\t  \t<d3-plots data="clinicalDataCollection.selectedCollectionData"></d3-plots>\n\t  </div>\n\t</div>\n</div>\n'),a.put("./src/morphologicalData.template.html",'\n<div class="row">\n\t<div class="panel panel-default">\n  \t\t<div class="panel-body">\n\t\t\t<div class="col-md-12">\n\t\t\t\t<div class="btn-group">\n\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataSectionDisplay.section = 1">\n\t\t\t\t \t<span class="glyphicon glyphicon-plus"></span>\n\t\t\t\t \tNew Collection\n\t\t\t\t </button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="row" ng-if="morphologicalDataSectionDisplay.section == 1">\n\t<div class="panel panel-success">\n\t  <div class="panel-body">\n\t  \t<div class="input-group">\n  \t\t\t<span class="input-group-addon">Name</span>\n  \t\t\t<input type="text" class="form-control" placeholder="Collection name" aria-describedby="basic-addon3" ng-model="morphologicalDataCollection.newCollection.name">\n  \t\t</div>\n  \t\t<div class="btn-group">\n\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.create(morphologicalDataCollection.newCollection);morphologicalDataSectionDisplay.section = 0">\n\t\t\t \t<span class="glyphicon glyphicon-ok"></span>\n\t\t\t \tCreate\n\t\t\t </button>\n\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataSectionDisplay.section = 0">\n\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n\t\t\t \tCancel\n\t\t\t </button>\n\t\t\t</div>\n\t  </div>\n\t</div>\n</div>\n\n<div class="row" ng-if="morphologicalDataSectionDisplay.section == 0">\n\t<div class="panel panel-default">\n  \t\t<div class="panel-body">\n  \t\t\t<div class="col-sm-6 col-md-4">\n\t\t\t\t<div ng-class="morphologicalDataCollection.collectionsProperties[\'defaultMorphologicalDataCollection\'].class">\n\t\t\t\t    <div class="thumbnail">\n\t\t\t\t    \t\x3c!-- <img src="" alt=""> --\x3e\n\t\t\t\t      <div class="caption">\n\t\t\t\t        <h3>{{defaultMorphologicalDataCollection.name}}</h3>\n\t\t\t\t        <p>\n\t\t\t\t        \t<b>Number of items: </b> {{defaultMorphologicalDataCollection.items.length}}\n\t\t\t\t        </p>\n\t\t\t        \t<div class="btn-group">\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.section = 0;morphologicalDataCollection.select(defaultMorphologicalDataCollection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-refresh"></span>\n\t\t\t\t\t\t </button>\n\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="csv.export(defaultClinicalDataCollection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-download"></span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t\t \n\t\t\t\t\t\t</div>\n\t\t\t\t      </div>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-6 col-md-4" ng-repeat="collection in morphologicalDataCollection.collections">\n\t\t\t\t<div ng-class="morphologicalDataCollection.collectionsProperties[collection._id].class">\n\t\t\t\t    <div class="thumbnail">\n\t\t\t\t    \t\x3c!-- <img src="" alt=""> --\x3e\n\t\t\t\t      <div class="caption">\n\t\t\t\t        <h3>{{collection.name}}</h3>\n\t\t\t\t        <p>\n\t\t\t\t        \t<b>Number of items: </b> {{collection.items.length}}\n\t\t\t\t        </p>\n\t\t\t        \t<div class="btn-group">\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.section = 0;morphologicalDataCollection.select(collection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-eye-open"></span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.section = 1;morphologicalDataCollection.select(collection);morphologicalDataCollection.getAllMorphologicalDataSelect()">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-plus-sign"></span>\n\t\t\t\t\t\t </button>\n\n\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="csv.export(collection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-download"></span>\n\t\t\t\t\t\t </button>\n\n\t\t\t\t\t\t <button type="button" class="btn btn-danger" ng-click="morphologicalDataCollection.delete(collection)">\n\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n\t\t\t\t\t\t </button>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t      </div>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="panel panel-default" ng-if="morphologicalDataCollection.section != -1">\n  \t\t<div class="panel-body">\n  \t\n\t\t\t<div class="row" ng-if="morphologicalDataCollection.section == 0">\n\t\t\t\t<div class="panel panel-default">\n\t\t  \t\t\t<div class="panel-body">\n\t\t  \t\t\t\t<table st-table="morphologicalDataCollection.displayedCollection" st-safe-src="morphologicalDataCollection.selectedCollectionData" class="table table-striped">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th ng-repeat="key in morphologicalDataCollection.selectedCollectionDataKeys" st-sort="{{key}}" ng-if="key != \'scope\'">{{key}}</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th ng-repeat="key in morphologicalDataCollection.selectedCollectionDataKeys" ng-if="key != \'scope\'">\n\t\t\t\t\t\t\t\t\t\t<input st-search="{{key}}" placeholder="search for {{key}}" class="input-sm form-control" type="search"/>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-warning" ng-click="morphologicalData.removeAll()">\n\t\t\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n\t\t\t\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger" ng-click="morphologicalData.deleteAll()">\n\t\t\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-trash"></span>\n\t\t\t\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr ng-repeat="row in morphologicalDataCollection.displayedCollection">\n\t\t\t\t\t\t\t\t\t<td ng-repeat="key in morphologicalDataCollection.selectedCollectionDataKeys" ng-if="key != \'scope\'">\n\t\t\t\t\t\t\t\t\t\t<div ng-if="_.isArray(row[key]) && key == \'attachments\'">\n\t\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-default" ng-repeat="att in row[key]" ng-click="morphologicalData.viewAttachment(row, att)">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-eye"></span>{{att}}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div ng-if="!_.isArray(row[key])">\n\t\t\t\t\t\t\t\t\t\t\t{{row[key]}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div ng-if="_.isArray(row[key]) && key != \'attachments\'">\n\t\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<li ng-repeat="item in row[key]" ng-if="key == \'owners\'">{{item.user}}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- <li ng-repeat="item in row[key]" ng-if="key != \'owners\'">{{item}}</li> --\x3e\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-warning" ng-click="morphologicalData.remove(row, false, true)">\n\t\t\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n\t\t\t\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger" ng-click="morphologicalData.delete(row, false, true)">\n\t\t\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-trash"></span>\n\t\t\t\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t<directive-threejs data="morphologicalData.surface" height="400">\n\t\t\t\t\t\t</directive-threejs>\n\t\t  \t\t\t</div>\n\t\t  \t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="row" ng-if="morphologicalDataCollection.section == 1">\n\t\t\t\t<div class="panel panel-default">\n\t\t  \t\t\t<div class="panel-body">\n\t\t  \t\t\t\t<div class="panel panel-success">\n\t\t\t\t\t\t  <div class="panel-body">\n\t\t\t\t\t\t  \t<div class="btn-group">\n\t\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.addMorphologicalData();morphologicalDataCollection.section = -1">\n\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-plus"></span>Upload\n\t\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalData.clear();morphologicalDataCollection.section = -1">\n\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>Cancel\n\t\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t  \t</div>\n\t\t\t\t\t\t  \n\t\t\t\t\t\t  \t<div class="input-group">\n\t\t\t\t\t  \t\t\t<span class="input-group-addon">Id</span>\n\t\t\t\t\t  \t\t\t<input type="string" class="form-control" placeholder="Patient id (required)" aria-describedby="basic-addon3" ng-model="morphologicalData.data.patientId" ng-readonly="editFields">\n\t\t\t\t\t  \t\t</div>\n\t\t\t\t\t\t  \t<div class="input-group">\n\t\t\t\t\t  \t\t\t<span class="input-group-addon">Date</span>\n\t\t\t\t\t  \t\t\t<input type="date" class="form-control" aria-describedby="basic-addon3" ng-model="morphologicalData.data.date">\n\t\t\t\t\t  \t\t</div>\n\t\t\t\t\t  \t\t<div class="input-group">\n\t\t\t\t\t\t  \t\t<label class="btn btn-default" for="clinicalData-file-selector" ng-click="morphologicalData.selectedForm = -1;">\n\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-folder-open"></span>\n\t\t\t\t\t\t\t\t    <input id="clinicalData-file-selector" file-model=\'morphologicalData.data.file\' type="file"  style="display:none;">\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t  \t\t\t<span class="input-group-addon">Filename</span>\n\t\t\t\t\t  \t\t\t<input type="text" class="form-control" placeholder="No file selected" aria-describedby="basic-addon3" ng-model="morphologicalData.data.file.name" readonly>\n\t\t\t\t\t  \t\t</div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</div>\n\t\t  \t\t\t</div>\n\t\t  \t\t</div>\n\t\t  \t\t<div class="panel panel-default">\n\t\t  \t\t\t<div class="panel-body">\n\t\t  \t\t\t\t<table st-table="morphologicalDataCollection.displayedCollectionDataSelect" st-safe-src="morphologicalDataCollection.collectionDataSelect" class="table table-striped">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th ng-repeat="key in morphologicalDataCollection.collectionDataSelectKeys" st-sort="{{key}}" ng-if="key != \'scope\'">{{key}}</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th ng-repeat="key in morphologicalDataCollection.collectionDataSelectKeys" ng-if="key != \'scope\'">\n\t\t\t\t\t\t\t\t\t\t<input st-search="{{key}}" placeholder="search for {{key}}" class="input-sm form-control" type="search"/>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-info" ng-click="morphologicalDataCollection.addAllMorphologicalData()">\n\t\t\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-plus"></span>\n\t\t\t\t\t\t\t\t\t\t </button>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr ng-repeat="row in morphologicalDataCollection.displayedCollectionDataSelect">\n\t\t\t\t\t\t\t\t\t<td ng-repeat="key in morphologicalDataCollection.collectionDataSelectKeys" ng-if="key != \'scope\'">\n\t\t\t\t\t\t\t\t\t\t<div ng-if="_.isArray(row[key]) && key == \'attachments\'">\n\t\t\t\t\t\t\t\t\t\t\t{{att}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div ng-if="!_.isArray(row[key])">\n\t\t\t\t\t\t\t\t\t\t\t{{row[key]}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div ng-if="_.isArray(row[key]) && key != \'attachments\'">\n\t\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<li ng-repeat="item in row[key]" ng-if="key == \'owners\'">{{item.user}}</li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-info" ng-click="morphologicalDataCollection.addMorphologicalData(row, true)">\n\t\t\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-plus"></span>\n\t\t\t\t\t\t\t\t\t\t </button>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>')}]);