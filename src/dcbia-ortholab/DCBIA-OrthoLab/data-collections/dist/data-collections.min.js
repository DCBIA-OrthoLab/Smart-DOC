angular.module("data-collections",[]);angular.module("data-collections").factory("dcbia",["$q","$http","$location",function($q,$http,$location){return{getClinicalDataCollections:function(){return $http({method:"GET",url:"/dcbia/clinical/collections"})},getClinicalDataCollection:function(id){return $http({method:"GET",url:"/dcbia/clinical/collection/"+id})},createClinicalDataCollection:function(data){return $http({method:"POST",url:"/dcbia/clinical/collection",data:data})},updateClinicalDataCollection:function(data){return $http({method:"PUT",url:"/dcbia/clinical/collection",data:data})},deleteClinicalDataCollection:function(id){return $http({method:"DELETE",url:"/dcbia/clinical/collection/"+id})},getAllClinicalData:function(){return $http({method:"GET",url:"/dcbia/clinical/collection/data"})},getClinicalData:function(id){return $http({method:"GET",url:"/dcbia/clinical/collection/data/"+id})},getClinicalDataOwners:function(){return $http({method:"GET",url:"/dcbia/clinical/data/owner"})},getClinicalDataOwner:function(email){return $http({method:"GET",url:"/dcbia/clinical/data/owner?email="+email})},createClinicalData:function(data){return $http({method:"POST",url:"/dcbia/clinical/data",data:data})},updateClinicalData:function(data){return $http({method:"PUT",url:"/dcbia/clinical/data",data:data})},deleteClinicalData:function(id){return $http({method:"DELETE",url:"/dcbia/clinical/data/"+id})},getMorphologicalDataCollections:function(){return $http({method:"GET",url:"/dcbia/morphological/collections"})},getMorphologicalDataCollection:function(id){return $http({method:"GET",url:"/dcbia/morphological/collection/"+id})},createMorphologicalDataCollection:function(data){return $http({method:"POST",url:"/dcbia/morphological/collection",data:data})},updateMorphologicalDataCollection:function(data){return $http({method:"PUT",url:"/dcbia/morphological/collection",data:data})},deleteMorphologicalDataCollection:function(id){return $http({method:"DELETE",url:"/dcbia/morphological/collection/"+id})},getAllMorphologicalData:function(){return $http({method:"GET",url:"/dcbia/morphological/collection/data"})},getMorphologicalData:function(id){return $http({method:"GET",url:"/dcbia/morphological/collection/data/"+id})},createMorphologicalData:function(data){return $http({method:"POST",url:"/dcbia/morphological/data",data:data})},addAttachement:function(id,filename,data){return $http({method:"PUT",url:"/dcbia/"+id+"/"+filename,data:data})},getAttachement:function(id,filename,responseType){return $http({method:"GET",url:"/dcbia/"+id+"/"+filename,responseType:responseType})},updateMorphologicalData:function(data){return $http({method:"PUT",url:"/dcbia/morphological/data",data:data})},deleteMorphologicalData:function(id){return $http({method:"DELETE",url:"/dcbia/morphological/data/"+id})},getMorphologicalDataByPatientId:function(id){return $http({method:"GET",url:"/dcbia/morphological/data/patientId/"+id})},getProjects:function(){return $http({method:"GET",url:"/dcbia/projects"})},getProject:function(id){return $http({method:"GET",url:"/dcbia/project/"+id})},createProject:function(data){return $http({method:"POST",url:"/dcbia/projects",data:data})},updateProject:function(data){return $http({method:"PUT",url:"/dcbia/projects",data:data})},deleteProject:function(id){return $http({method:"DELETE",url:"/dcbia/project/"+id})}}}]);angular.module("data-collections").directive("clinicalData",["$routeParams","dcbia","clusterauth",function($routeParams,dcbia,clusterauth){function link($scope,$attrs,$filter){clusterauth.getUser().then(function(res){$scope.user=res});$scope.clinicalDataSectionDisplay={};$scope.clinicalDataCollection={showCreate:false,newCollection:{items:[],type:"clinicalDataCollection",name:""},collections:[],collectionsProperties:{defaultClinicalDataCollection:{class:""}},selectedForm:-1};$scope.defaultClinicalDataCollection={_id:"defaultClinicalDataCollection",name:"All clinical data",type:"clinicalDataCollection",items:0};$scope.clinicalDataCollection.getClinicalDataCollections=function(){return dcbia.getClinicalDataCollections().then(function(res){delete $scope.clinicalDataCollection.selectedCollection;$scope.clinicalDataCollection.collections=res.data;_.each($scope.clinicalDataCollection.collections,function(collection){$scope.clinicalDataCollection.collectionsProperties[collection._id]={class:""}})}).catch(console.error)};$scope.clinicalDataCollection.create=function(newCollection){dcbia.createClinicalDataCollection(newCollection).then(function(res){$scope.clinicalDataCollection.getClinicalDataCollections()}).catch(console.error)};$scope.clinicalDataCollection.selectCollection=function(collection){if($scope.clinicalDataCollection.selectedCollection){$scope.clinicalDataCollection.collectionsProperties[$scope.clinicalDataCollection.selectedCollection._id].class=""}$scope.clinicalDataCollection.selectedCollection=collection;$scope.clinicalDataCollection.collectionsProperties[collection._id].class="alert alert-info"};$scope.clinicalDataCollection.getDataCollectionKeys=function(collectiondata){var collectionDataKeys={};_.each(collectiondata,function(item){_.extend(collectionDataKeys,item)});if(collectionDataKeys._id){delete collectionDataKeys._id}if(collectionDataKeys._rev){delete collectionDataKeys._rev}return _.keys(collectionDataKeys)};$scope.clinicalDataCollection.select=function(collection){$scope.clinicalDataCollection.selectCollection(collection);var prom;if(collection._id==="defaultClinicalDataCollection"){prom=dcbia.getAllClinicalData().then(function(res){$scope.defaultClinicalDataCollection.items=_.map(res.data,function(doc){if(!doc.patientId){doc.patientId="null"}return{_id:doc._id}});return res})}else{prom=dcbia.getClinicalData(collection._id)}return prom.then(function(res){var selectedCollectionData=res.data;$scope.clinicalDataCollection.selectedCollectionData=selectedCollectionData;$scope.clinicalDataCollection.selectedCollectionDataKeys=$scope.clinicalDataCollection.getDataCollectionKeys(selectedCollectionData)}).catch(console.error)};$scope.clinicalDataCollection.delete=function(collection){if(confirm("Are you sure you want to delete the collection?")){dcbia.deleteClinicalDataCollection(collection._id).then(function(res){return $scope.clinicalDataCollection.getClinicalDataCollections()}).catch(console.error)}};$scope.clinicalDataCollection.refreshSelectedCollection=function(){$scope.clinicalDataCollection.select($scope.clinicalDataCollection.selectedCollection).then(function(res){return dcbia.getClinicalDataCollection($scope.clinicalDataCollection.selectedCollection._id).then(function(res){$scope.clinicalDataCollection.selectedCollection=res.data;$scope.clinicalDataCollection.collections=_.map($scope.clinicalDataCollection.collections,function(clinicalDataCollection){if(clinicalDataCollection._id===$scope.clinicalDataCollection.selectedCollection._id){return $scope.clinicalDataCollection.selectedCollection}return clinicalDataCollection})})})};$scope.clinicalDataCollection.addClinicalData=function(collection){$scope.clinicalDataCollection.selectCollection(collection)};$scope.clinicalDataCollection.update=function(collection){return dcbia.updateClinicalDataCollection(collection).then(function(res){collection._rev=res.data.rev})};$scope.clinicalDataCollection.selectForm=function(formId){if($scope.clinicalDataCollection.selectedForm===-1){$scope.clinicalDataCollection.selectedForm=formId}else if($scope.clinicalDataCollection.selectedForm!==formId&&confirm("You will lose the current changes in this form. Do you want to continue?")){$scope.clinicalDataCollection.selectedForm=formId}};$scope.clinicalDataCollection.getClinicalDataCollections().then(function(){if($routeParams.collectionId){var col=_.find($scope.clinicalDataCollection.collections,function(col){return col._id===$routeParams.collectionId});$scope.clinicalDataCollection.showSection=0;return $scope.clinicalDataCollection.select(col)}}).catch(console.error);$scope.clinical={data:{}};$scope.clinical.clearForm=function(force){var clear=false;if(!force){force=confirm("Do you want to clear the current changes?")}if(force){$scope.clinical.data={};$scope.clinical.data.formId="";var dt=new Date;var year=dt.getFullYear();var month=dt.getMonth()+1>=10?dt.getMonth()+1:"0"+(dt.getMonth()+1);var day=dt.getDate()>=10?dt.getDate():"0"+dt.getDate();$scope.clinical.data.date=year+"-"+month+"-"+day}};$scope.clinical.create=function(){var selectedCollection=$scope.clinicalDataCollection.selectedCollection;if(!selectedCollection){alert("You need to select a collection first!")}else if($scope.clinical.data){$scope.clinical.data=$scope.clinical.checkProblemsAnswers($scope.clinical.data);$scope.clinical.createClinicalData($scope.clinical.data).then(function(res){selectedCollection.items.push({_id:res.data.id});return $scope.clinicalDataCollection.update(selectedCollection)}).catch(console.error)}};$scope.clinical.createClinicalData=function(clinical){clinical.type="clinicalData";return dcbia.createClinicalData(clinical).catch(console.error)};$scope.clinical.deleteAllFiltered=function(clinicalData){if(confirm("Do you want to delete the items beign displayed?")){Promise.all(_.map(clinicalData,function(item){$scope.clinicalDataCollection.selectedCollection.items.splice(_.findIndex($scope.clinicalDataCollection.selectedCollection.items,{_id:item._id}),1);return dcbia.deleteClinicalData(item._id)}))}$scope.clinicalDataCollection.update($scope.clinicalDataCollection.selectedCollection);$scope.clinicalDataCollection.select($scope.clinicalDataCollection.selectedCollection)};$scope.clinical.delete=function(item){if(confirm("Do you want to delete the current item?")){return dcbia.deleteClinicalData(item._id).then(function(){$scope.clinicalDataCollection.refreshSelectedCollection()})}};$scope.clinical.edit=function(item){$scope.clinical.dataEdit=_.clone(item)};$scope.clinical.update=function(item){item=$scope.clinical.checkProblemsAnswers(item);dcbia.updateClinicalData(item).then(function(res){$scope.clinical.showSection=-1;$scope.clinicalDataCollection.select($scope.clinicalDataCollection.selectedCollection)})};$scope.clinical.checkProblemsAnswers=function(data){var problemList=["problemOrPreventChewing","problemOrPreventDrinking","problemOrPreventExercising","problemOrPreventEatingHardFoods","problemOrPreventEatingSoftFoods","problemOrPreventSmilingLaughing","problemOrPreventSexualActivity","problemOrPreventCleaningTeethOrFace","problemOrPreventYawning","problemOrPreventSwallowing","problemOrPreventTalking","problemOrPreventHavingUsualFaceAppearance"];var problemListValues=[];_.each(problemList,function(problemName){problemListValues.push(data[problemName])});if(problemListValues.indexOf(true)!==-1){_.each(problemListValues,function(value,i){if(value){data[problemList[i]]="yes"}else{data[problemList[i]]="no"}})}return data};$scope.csv={};$scope.$watch("csv.file",function(){if($scope.csv.file){$scope.csv.readFile().then(function(){$scope.$apply()})}});$scope.csv.readFile=function(){return $scope.csv.open($scope.csv.file).then(function(selectedCollectionData){var selectedCollectionDataKeys={};_.each(selectedCollectionData,function(item){_.extend(selectedCollectionDataKeys,item)});if(selectedCollectionDataKeys["patientId"]===undefined){$scope.csv.selectPatientId=true}selectedCollectionDataKeys=_.keys(selectedCollectionDataKeys);$scope.csv.selectedCollectionData=selectedCollectionData;$scope.csv.selectedCollectionDataKeys=selectedCollectionDataKeys})};$scope.csv.open=function(file){return new Promise(function(resolve,reject){var reader=new FileReader;reader.onload=function(e){var csv=e.target.result;if(csv.indexOf("\r\n")===-1&&csv.indexOf("\r")!==-1){csv=csv.replace(new RegExp("\r","g"),"\n")}resolve($scope.csv.JSON(csv))};reader.onerror=function(e){reject(e)};reader.readAsText(file)})};$scope.csv.camelize=function(str){return str.replace(/(?:^\w|[A-Z]|\b\w)/g,function(letter,index){if(index==0&&!isNaN(parseInt(letter))){return""}return index==0?letter.toLowerCase():letter.toUpperCase()}).replace(/\s+/g,"").replace(/-/g,"")};$scope.csv.JSON=function(csv){var lines=csv.split("\n");var result=[];var headers=_.map(lines[0].split(","),function(val){try{return eval(val)}catch(e){if(_.isString(val)){return $scope.csv.camelize(val)}return val}});for(var i=1;i<lines.length;i++){var obj={};var currentline=_.map(lines[i].split(","),function(val){try{return eval(val)}catch(e){return val}});for(var j=0;j<headers.length;j++){obj[headers[j]]=currentline[j]}result.push(obj)}return result};$scope.csv.create=function(){if($scope.csv.selectPatientId&&!$scope.csv.selectedPatientId){alert("Please select a patientId from the available column headers!")}else{Promise.all(_.map($scope.csv.selectedCollectionData,function(row){var rowclone=_.clone(row);if($scope.csv.selectPatientId){rowclone.patientId=row[$scope.csv.selectedPatientId];delete rowclone[$scope.csv.selectedPatientId]}if(rowclone.owner===undefined){rowclone.owner=$scope.user.email}if(rowclone.formId===undefined){rowclone.formId="imported-csv"}if(rowclone.date===undefined){var dt=new Date;var year=dt.getFullYear();var month=dt.getMonth()+1>=10?dt.getMonth()+1:"0"+(dt.getMonth()+1);var day=dt.getDate()>=10?dt.getDate():"0"+dt.getDate();rowclone.date=year+"-"+month+"-"+day}return $scope.clinical.createClinicalData(rowclone)})).then(function(res){_.each(_.pluck(res,"data"),function(status){$scope.clinicalDataCollection.selectedCollection.items.push({_id:status.id})});return $scope.clinicalDataCollection.update($scope.clinicalDataCollection.selectedCollection)}).then(function(res){delete $scope.csv.selectedCollectionData;delete $scope.csv.selectedCollectionDataKeys;return $scope.clinicalDataCollection.select($scope.clinicalDataCollection.selectedCollection)}).catch(console.error)}};$scope.csv.export=function(collection){var prom;if(!$scope.clinicalDataCollection.selectedCollection||collection._id!==$scope.clinicalDataCollection.selectedCollection._id){prom=$scope.clinicalDataCollection.select(collection)}else{prom=Promise.resolve(true)}prom.then(function(){var keys=$scope.clinicalDataCollection.getDataCollectionKeys($scope.clinicalDataCollection.selectedCollectionData);var csv=keys.toString();csv+="\n";_.each($scope.clinicalDataCollection.selectedCollectionData,function(row,i){_.each(keys,function(key,j){var value;if(Array.isArray(row[key])){_.each(row[key],function(item,k){if(k===0){value=item?item:""}else{value+=" "+(item?item:"")}})}else{if(row[key]===undefined||row[key]===null){value=""}else{value=row[key].toString()?row[key].toString():""}}csv+=value;if(j<keys.length-1){csv+=","}});if(i<$scope.clinicalDataCollection.selectedCollectionData.length-1){csv+="\n"}});var filename=$scope.clinicalDataCollection.selectedCollection.name;if($scope.clinicalDataCollection.selectedCollection.name.indexOf("csv")===-1){filename+=".csv"}return $scope.csv.download(filename,csv)})};$scope.csv.download=function(filename,csv){var pom=document.createElement("a");var bb=new Blob([csv],{type:"text/plain"});pom.setAttribute("href",window.URL.createObjectURL(bb));pom.setAttribute("download",filename);pom.dataset.downloadurl=["text/plain",pom.download,pom.href].join(":");pom.click()}}return{restrict:"E",link:link,templateUrl:"./src/clinicalData.template.html"}}]);angular.module("data-collections").directive("morphologicalData",["$routeParams","dcbia","clusterauth",function($routeParams,dcbia,clusterauth){function link($scope,$attrs,$filter){clusterauth.getUser().then(function(res){$scope.user=res});$scope.morphologicalDataSectionDisplay={section:0};$scope._=_;$scope.morphologicalDataCollection={newCollection:{items:[],type:"morphologicalDataCollection",name:""},collections:[],collectionsProperties:{defaultMorphologicalDataCollection:{class:""}},section:-1};$scope.morphologicalData={data:{}};$scope.defaultMorphologicalDataCollection={_id:"defaultMorphologicalDataCollection",name:"All morphological data",type:"morphologicalDataCollection",items:0};$scope.csv={};$scope.$watch("csv.file",function(){if($scope.csv.file){$scope.csv.readFile().then(function(){$scope.$apply()})}});$scope.morphologicalDataCollection.getMorphologicalDataCollections=function(){return dcbia.getMorphologicalDataCollections().then(function(res){delete $scope.morphologicalDataCollection.selectedCollection;$scope.morphologicalDataCollection.collections=res.data;_.each($scope.morphologicalDataCollection.collections,function(collection){$scope.morphologicalDataCollection.collectionsProperties[collection._id]={class:""}})}).catch(console.error)};$scope.morphologicalDataCollection.create=function(newCollection){dcbia.createMorphologicalDataCollection(newCollection).then(function(res){return $scope.morphologicalDataCollection.getMorphologicalDataCollections()}).catch(console.error)};$scope.morphologicalDataCollection.selectCollection=function(collection){if($scope.morphologicalDataCollection.selectedCollection){$scope.morphologicalDataCollection.collectionsProperties[$scope.morphologicalDataCollection.selectedCollection._id].class=""}$scope.morphologicalDataCollection.selectedCollection=collection;$scope.morphologicalDataCollection.collectionsProperties[collection._id].class="alert alert-info"};$scope.morphologicalDataCollection.refreshSelectedCollection=function(){$scope.morphologicalDataCollection.select($scope.morphologicalDataCollection.selectedCollection).then(function(res){return dcbia.getMorphologicalDataCollection($scope.morphologicalDataCollection.selectedCollection._id).then(function(res){$scope.morphologicalDataCollection.selectedCollection=res.data;$scope.morphologicalDataCollection.collections=_.map($scope.morphologicalDataCollection.collections,function(morphologicalDataCollection){if(morphologicalDataCollection._id===$scope.morphologicalDataCollection.selectedCollection._id){return $scope.morphologicalDataCollection.selectedCollection}return morphologicalDataCollection})})})};$scope.morphologicalDataCollection.getDataCollectionKeys=function(collectiondata){var collectionDataKeys={};_.each(collectiondata,function(item){_.extend(collectionDataKeys,item)});if(collectionDataKeys._id){delete collectionDataKeys._id}if(collectionDataKeys._rev){delete collectionDataKeys._rev}if(collectionDataKeys._attachments){delete collectionDataKeys._attachments}collectionDataKeys.attachments={};return _.keys(collectionDataKeys)};$scope.morphologicalDataCollection.select=function(collection){$scope.morphologicalDataCollection.selectCollection(collection);var prom;if(collection._id==="defaultMorphologicalDataCollection"){prom=dcbia.getAllMorphologicalData().then(function(res){$scope.defaultMorphologicalDataCollection.items=_.map(res.data,function(doc){if(!doc.patientId){doc.patientId="null"}return{_id:doc._id}});return res})}else{prom=dcbia.getMorphologicalData(collection._id)}return prom.then(function(res){var selectedCollectionData=res.data;$scope.morphologicalDataCollection.selectedCollectionData=_.map(selectedCollectionData,function(d){if(d._attachments){_.extend(d,{attachments:_.keys(d._attachments)})}return d});$scope.morphologicalDataCollection.selectedCollectionDataKeys=$scope.morphologicalDataCollection.getDataCollectionKeys(selectedCollectionData)}).catch(console.error)};$scope.morphologicalDataCollection.delete=function(collection){if(confirm("Are you sure you want to delete the collection?")){dcbia.deleteMorphologicalDataCollection(collection._id).then(function(res){return $scope.morphologicalDataCollection.getMorphologicalDataCollections()}).catch(console.error)}};$scope.morphologicalDataCollection.addMorphologicalData=function(){if($scope.morphologicalData.data.date==undefined){var dt=new Date}else{var dt=$scope.morphologicalData.data.date}var year=dt.getFullYear();var month=dt.getMonth()+1>=10?dt.getMonth()+1:"0"+(dt.getMonth()+1);var day=dt.getDate()>=10?dt.getDate():"0"+dt.getDate();$scope.morphologicalData.data.date=year+"-"+month+"-"+day;var morphologicalData={patientId:$scope.morphologicalData.data.patientId,date:$scope.morphologicalData.data.date,scope:[],owners:[],type:"morphologicalData"};morphologicalData.owners.push({user:$scope.user.email});dcbia.createMorphologicalData(morphologicalData).then(function(res){$scope.morphologicalDataCollection.selectedCollection.items.push({_id:res.data.id});return Promise.all([dcbia.addAttachement(res.data.id,$scope.morphologicalData.data.file.name,$scope.morphologicalData.data.file),dcbia.updateMorphologicalDataCollection($scope.morphologicalDataCollection.selectedCollection)])}).then(function(res){$scope.morphologicalData.clear()}).catch(function(err){alert(JSON.stringify(err))})};$scope.morphologicalDataCollection.getMorphologicalDataCollections().then(function(){if($routeParams.collectionId){var col=_.find($scope.morphologicalDataCollection.collections,function(col){return col._id===$routeParams.collectionId});$scope.morphologicalDataCollection.section=0;return $scope.morphologicalDataCollection.select(col)}}).catch(console.error);$scope.morphologicalData.delete=function(item){if(confirm("Do you want to delete the current item?")){return dcbia.deleteMorphologicalData(item._id).then(function(){$scope.morphologicalDataCollection.refreshSelectedCollection()})}};$scope.morphologicalData.clear=function(){$scope.morphologicalData.data={}};$scope.morphologicalData.viewAttachment=function(mdata,att){$scope.morphologicalData.surface=null;dcbia.getAttachement(mdata._id,att,"arraybuffer").then(function(res){$scope.morphologicalData.surface=res.data})};$scope.csv.export=function(collection){var prom;if(!$scope.morphologicalDataCollection.selectedCollection||collection._id!==$scope.morphologicalDataCollection.selectedCollection._id){prom=$scope.morphologicalDataCollection.select(collection)}else{prom=Promise.resolve(true)}prom.then(function(){var keys=$scope.morphologicalDataCollection.getDataCollectionKeys($scope.morphologicalDataCollection.selectedCollectionData);var csv=keys.toString();csv+="\n";_.each($scope.morphologicalDataCollection.selectedCollectionData,function(row,i){_.each(keys,function(key,j){var value;if(Array.isArray(row[key])){var objectKeys={};_.each(row[key],function(item,k){if(typeof item==="object"){objectKeys=Object.keys(item);_.each(objectKeys,function(key,l){if(k===0&&l===0){value=item[key]?item[key]:""}else{value+=" "+(item[key]?item[key]:"")}})}else{if(k===0){value=item?item:""}else{value+=" "+(item?item:"")}}})}else{value=row[key]?row[key]:""}csv+=value;if(j<keys.length-1){csv+=","}});if(i<$scope.morphologicalDataCollection.selectedCollectionData.length-1){csv+="\n"}});var filename=$scope.morphologicalDataCollection.selectedCollection.name;if($scope.morphologicalDataCollection.selectedCollection.name.indexOf("csv")===-1){filename+=".csv"}return $scope.csv.download(filename,csv)})};$scope.csv.download=function(filename,csv){var pom=document.createElement("a");var bb=new Blob([csv],{type:"text/plain"});pom.setAttribute("href",window.URL.createObjectURL(bb));pom.setAttribute("download",filename);pom.dataset.downloadurl=["text/plain",pom.download,pom.href].join(":");pom.click()}}return{restrict:"E",link:link,templateUrl:"./src/morphologicalData.template.html"}}]);angular.module("data-collections").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("./src/clinicalData.template.html","\n"+"\n"+'<div class="row">\n'+'\t<div class="panel panel-default">\n'+'  \t\t<div class="panel-body">\n'+'\t\t\t<div class="col-md-12">\n'+'\t\t\t\t<div class="btn-group">\n'+'\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showCreate = true">\n'+'\t\t\t\t \t<span class="glyphicon glyphicon-plus"></span>\n'+"\t\t\t\t \tNew Collection\n"+"\t\t\t\t </button>\n"+"\t\t\t\t</div>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+"\t</div>\n"+"</div>\n"+"\n"+'<div class="row" ng-if="clinicalDataCollection.showCreate">\n'+'\t<div class="panel panel-success">\n'+'\t  <div class="panel-body">\n'+'\t  \t<div class="input-group">\n'+'  \t\t\t<span class="input-group-addon">Name</span>\n'+'  \t\t\t<input type="text" class="form-control" placeholder="Collection name" aria-describedby="basic-addon3" ng-model="clinicalDataCollection.newCollection.name">\n'+"  \t\t</div>\n"+'  \t\t<div class="btn-group">\n'+'\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.create(clinicalDataCollection.newCollection);clinicalDataCollection.showCreate=false">\n'+'\t\t\t \t<span class="glyphicon glyphicon-ok"></span>\n'+"\t\t\t \tCreate\n"+"\t\t\t </button>\n"+'\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showCreate = false">\n'+'\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n'+"\t\t\t \tCancel\n"+"\t\t\t </button>\n"+"\t\t\t</div>\n"+"\t  </div>\n"+"\t</div>\n"+"</div>\n"+"\n"+'<div class="row" ng-if="!clinicalDataCollection.showCreate">\n'+'\t<div class="panel panel-default">\n'+'  \t\t<div class="panel-body">\n'+'  \t\t\t<div class="col-sm-6 col-md-4">\n'+"\t\t\t\t<div ng-class=\"clinicalDataCollection.collectionsProperties['defaultClinicalDataCollection'].class\">\n"+'\t\t\t\t    <div class="thumbnail">\n'+'\t\t\t\t    \t<!-- <img src="" alt=""> -->\n'+'\t\t\t\t      <div class="caption">\n'+"\t\t\t\t        <h3>{{defaultClinicalDataCollection.name}}</h3>\n"+"\t\t\t\t        <p>\n"+"\t\t\t\t        \t<b>Number of items: </b> {{defaultClinicalDataCollection.items.length}}\n"+"\t\t\t\t        </p>\n"+'\t\t\t        \t<div class="btn-group">\n'+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.select(defaultClinicalDataCollection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-refresh"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\n"+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="csv.export(defaultClinicalDataCollection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-download"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t \n"+"\t\t\t\t\t\t</div>\n"+"\t\t\t\t      </div>\n"+"\t\t\t\t    </div>\n"+"\t\t\t\t</div>\n"+"\t\t\t</div>\n"+'\t\t\t<div class="col-sm-6 col-md-4" ng-repeat="collection in clinicalDataCollection.collections">\n'+'\t\t\t\t<div ng-class="clinicalDataCollection.collectionsProperties[collection._id].class">\n'+'\t\t\t\t    <div class="thumbnail">\n'+'\t\t\t\t    \t<!-- <img src="" alt=""> -->\n'+'\t\t\t\t      <div class="caption">\n'+"\t\t\t\t        <h3>{{collection.name}}</h3>\n"+"\t\t\t\t        <p>\n"+"\t\t\t\t        \t<b>Number of items: </b> {{collection.items.length}}\n"+"\t\t\t\t        </p>\n"+'\t\t\t        \t<div class="btn-group">\n'+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showSection = 0;clinicalDataCollection.select(collection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-eye-open"></span>\n'+"\t\t\t\t\t\t </button>\n"+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showSection = 1;clinicalDataCollection.addClinicalData(collection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-plus-sign"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\n"+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="csv.export(collection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-download"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\n"+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.select(collection);clinicalDataCollection.showSection = 2">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-signal"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t \n"+'\t\t\t\t\t\t <button type="button" class="btn btn-danger" ng-click="clinicalDataCollection.showSection = -1;clinicalDataCollection.delete(collection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove-sign"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t</div>\n"+"\t\t\t\t      </div>\n"+"\t\t\t\t    </div>\n"+"\t\t\t\t</div>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+"\t</div>\n"+'\t<div class="panel panel-info" ng-if="clinicalDataCollection.showSection == 0">\n'+'\t\t<div class="panel panel-default" ng-if="user.scope.indexOf(\'admin\') !== -1">\n'+'\t  \t\t<div class="panel-body">\n'+'\t  \t\t\t<div class="btn-group">\n'+'\t\t\t\t\t <button type="button" class="btn btn-danger" ng-click="clinical.deleteAllFiltered(clinicalDataCollection.displayedCollection)">\n'+'\t\t\t\t\t \tRemoves all filtered<span class="glyphicon glyphicon-remove"></span>\n'+"\t\t\t\t\t </button>\n"+"\t\t\t\t</div>\n"+"\t  \t\t</div>\n"+"\t  \t</div>\n"+'\t\t<div class="panel panel-default" style="overflow:scroll">\n'+'\t  \t\t<div class="panel-body">\n'+'\t  \t\t\t<table st-table="clinicalDataCollection.displayedCollection" st-safe-src="clinicalDataCollection.selectedCollectionData" class="table table-striped">\n'+"\t\t\t\t\t<thead>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th ng-repeat="key in clinicalDataCollection.selectedCollectionDataKeys" st-sort="{{key}}" ng-if="key != \'scope\'">{{key}}</th>\n'+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th ng-repeat="key in clinicalDataCollection.selectedCollectionDataKeys" ng-if="key != \'scope\'">\n'+'\t\t\t\t\t\t\t\t<input st-search="{{key}}" placeholder="search for {{key}}" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</thead>\n"+"\t\t\t\t\t<tbody>\n"+'\t\t\t\t\t\t<tr ng-repeat="row in clinicalDataCollection.displayedCollection">\n'+'\t\t\t\t\t\t\t<td ng-repeat="key in clinicalDataCollection.selectedCollectionDataKeys" ng-if="key != \'scope\'">{{row[key]}}</td>\n'+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" class="btn btn-info" ng-click="clinical.showSection = 0;clinical.edit(row)">\n'+'\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-pencil"></span>\n'+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger" ng-click="clinical.delete(row)">\n'+'\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n'+"\t\t\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</tbody>\n"+"\t\t\t\t</table>\n"+"\t  \t\t</div>\n"+"\t  \t</div>\n"+'\t\t<div class="panel panel-default" ng-if="clinical.showSection == 0">\n'+'\t  \t\t<div class="panel-body">\n'+'\t  \t\t\t<div class="panel panel-default">\n'+'\t  \t\t\t\t<div class="panel-body">\n'+'\t  \t\t\t\t\t<div class="btn-group">\n'+'\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinical.update(clinical.dataEdit)">\n'+'\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-upload"></span>\n'+"\t\t\t\t\t\t\t </button>\n"+'\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinical.showSection = -1">\n'+'\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n'+"\t\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t</div>\n"+"\t  \t\t\t\t</div>\n"+"\t  \t\t\t</div>\n"+'\t  \t\t\t<div class="panel panel-default">\n'+'\t  \t\t\t\t<div class="panel-body">\n'+'\t  \t\t\t\t\t<tmj-survey form-data="clinical.dataEdit" ng-if="clinical.dataEdit.formId == \'TMJSurvey\'"></tmj-survey>\n'+"\t  \t\t\t\t</div>\n"+"\t  \t\t\t</div>\n"+"\n"+'\t  \t\t\t<div class="panel panel-default">\n'+'\t  \t\t\t\t<div class="panel-body">\n'+'\t  \t\t\t\t\t<div class="btn-group">\n'+'\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinical.update(clinical.dataEdit)">\n'+'\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-upload">Update</span>\n'+"\t\t\t\t\t\t\t </button>\n"+'\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinical.showSection = -1">\n'+'\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove">Cancel</span>\n'+"\t\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t</div>\n"+"\t  \t\t\t\t</div>\n"+"\t  \t\t\t</div>\n"+"\t  \t\t\t\n"+"\t  \t\t</div>\n"+"\t  \t</div>\n"+"\t\t\n"+"\t</div>\n"+"\n"+'\t<div class="panel panel-default" ng-if="clinicalDataCollection.showSection == 1">\n'+'\t  <div class="panel-body">\n'+"\t  \t\n"+'\t  \t<div class="panel panel-default">\n'+'\t\t  <div class="panel-body">\n'+'\t  \t\t<div class="btn-group">\n'+"\n"+'\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.selectForm(2)">\n'+'\t\t\t\t \t<span class="glyphicon glyphicon-list-alt"></span>\n'+"\t\t\t\t \tTMJ Survey\n"+"\t\t\t\t </button>\n"+"\n"+'\t\t\t\t <label class="btn btn-default" for="clinicalData-file-selector" ng-click="clinicalDataCollection.selectedForm = 100">\n'+'\t\t\t\t \t<span class="glyphicon glyphicon-folder-open"></span>\n'+'\t\t\t\t    <input id="clinicalData-file-selector" file-model=\'csv.file\' type="file" style="display:none;">\n'+"\t\t\t\t</label>\n"+"\n"+'\t\t\t\t <button type="button" class="btn btn-default" ng-click="clinicalDataCollection.showAddClinicalData = false;clinicalDataCollection.selectedForm = -1">\n'+'\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n'+"\t\t\t\t \tCancel\n"+"\t\t\t\t </button>\n"+"\t\t  \t</div>\n"+"\t\t  </div>\n"+"\t\t</div>\n"+"\n"+'\t  \t<div class="panel panel-info" ng-if="clinicalDataCollection.selectedForm === 2">\n'+'\t\t  <div class="panel-body">\n'+'\t\t  \t<div class="btn-group">\n'+'\t\t  \t\t<button type="button" class="btn btn-default" ng-click="clinical.clearForm(false)">\n'+'\t\t\t\t\t<span class="glyphicon glyphicon-minus"></span>\n'+"\t\t\t\t\tClear\n"+"\t\t\t\t</button>\n"+'\t\t\t\t<button type="button" class="btn btn-default" ng-click="clinical.create();clinical.clearForm(true);clinicalDataCollection.selectedForm = -1">\n'+'\t\t\t\t\t<span class="glyphicon glyphicon-save"></span>\n'+"\t\t\t\t\tSubmit\n"+"\t\t\t\t</button>\n"+"\t\t\t</div>\n"+'\t\t\t<tmj-survey form-data="clinical.data" ng-if="clinicalDataCollection.selectedForm == 2"></tmj-survey>\n'+'\t\t\t<div class="btn-group">\n'+'\t\t\t\t<button type="button" class="btn btn-default" ng-click="clinical.create();clinical.clearForm(true);clinicalDataCollection.selectedForm = -1">\n'+'\t\t\t\t\t<span class="glyphicon glyphicon-save"></span>\n'+"\t\t\t\t\tSubmit\n"+"\t\t\t\t</button>\n"+"\t\t\t</div>\n"+"\t\t  </div>\n"+"\t\t</div>\n"+"\n"+'\t\t<div class="panel panel-info" style="overflow:scroll" ng-if="clinicalDataCollection.selectedForm == 100 && csv.selectedCollectionData">\n'+'\t  \t\t<div class="panel-body">\n'+"\n"+'\t  \t\t\t<div class="btn-group col-md-3">\n'+'\t\t\t\t\t<button type="button" class="btn btn-default" ng-click="csv.create()">\n'+'\t\t\t\t\t \t<span class="glyphicon glyphicon-save"></span>\n'+"\t\t\t\t\t \tSave\n"+"\t\t\t\t\t</button>\n"+"\t\t\t\t</div>\n"+"\n"+'\t\t\t\t<div class="input-group col-md-6" ng-if="csv.selectPatientId">\n'+'\t\t\t\t\t<span class="input-group-addon" id="sizing-addon2">patientId:</span>\n'+'\t\t\t\t\t<select ng-model="csv.selectedPatientId" class="form-control">\n'+'\t\t\t\t\t\t<option ng-repeat="key in csv.selectedCollectionDataKeys">{{key}}</option>\n'+"\t\t\t\t\t</select>\n"+"\t\t\t\t</div>\n"+"\n"+'\t\t\t  \t<table st-table="csv.displayedCollection" st-safe-src="csv.selectedCollectionData" class="table table-striped" >\n'+"\t\t\t\t\t<thead>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th ng-repeat="key in csv.selectedCollectionDataKeys" st-sort="{{key}}">{{key}}</th>\n'+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th ng-repeat="key in csv.selectedCollectionDataKeys">\n'+'\t\t\t\t\t\t\t\t<input st-search="{{key}}" placeholder="search for {{key}}" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</thead>\n"+"\t\t\t\t\t<tbody>\n"+'\t\t\t\t\t\t<tr ng-repeat="row in csv.displayedCollection">\n'+'\t\t\t\t\t\t\t<td ng-repeat="key in csv.selectedCollectionDataKeys">{{row[key]}}</td>\n'+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</tbody>\n"+"\t\t\t\t</table>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+"\t  </div>\n"+"\t</div>\n"+'\t<div class="panel panel-default" ng-if="clinicalDataCollection.showSection == 2">\n'+'\t  <div class="panel-body">\n'+'\t  \t<d3-plots data="clinicalDataCollection.selectedCollectionData"></d3-plots>\n'+"\t  </div>\n"+"\t</div>\n"+"</div>\n");
$templateCache.put("./src/morphologicalData.template.html","\n"+'<div class="row">\n'+'\t<div class="panel panel-default">\n'+'  \t\t<div class="panel-body">\n'+'\t\t\t<div class="col-md-12">\n'+'\t\t\t\t<div class="btn-group">\n'+'\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataSectionDisplay.section = 1">\n'+'\t\t\t\t \t<span class="glyphicon glyphicon-plus"></span>\n'+"\t\t\t\t \tNew Collection\n"+"\t\t\t\t </button>\n"+"\t\t\t\t</div>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+"\t</div>\n"+"</div>\n"+"\n"+'<div class="row" ng-if="morphologicalDataSectionDisplay.section == 1">\n'+'\t<div class="panel panel-success">\n'+'\t  <div class="panel-body">\n'+'\t  \t<div class="input-group">\n'+'  \t\t\t<span class="input-group-addon">Name</span>\n'+'  \t\t\t<input type="text" class="form-control" placeholder="Collection name" aria-describedby="basic-addon3" ng-model="morphologicalDataCollection.newCollection.name">\n'+"  \t\t</div>\n"+'  \t\t<div class="btn-group">\n'+'\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.create(morphologicalDataCollection.newCollection);morphologicalDataSectionDisplay.section = 0">\n'+'\t\t\t \t<span class="glyphicon glyphicon-ok"></span>\n'+"\t\t\t \tCreate\n"+"\t\t\t </button>\n"+'\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataSectionDisplay.section = 0">\n'+'\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n'+"\t\t\t \tCancel\n"+"\t\t\t </button>\n"+"\t\t\t</div>\n"+"\t  </div>\n"+"\t</div>\n"+"</div>\n"+"\n"+'<div class="row" ng-if="morphologicalDataSectionDisplay.section == 0">\n'+'\t<div class="panel panel-default">\n'+'  \t\t<div class="panel-body">\n'+'  \t\t\t<div class="col-sm-6 col-md-4">\n'+"\t\t\t\t<div ng-class=\"morphologicalDataCollection.collectionsProperties['defaultMorphologicalDataCollection'].class\">\n"+'\t\t\t\t    <div class="thumbnail">\n'+'\t\t\t\t    \t<!-- <img src="" alt=""> -->\n'+'\t\t\t\t      <div class="caption">\n'+"\t\t\t\t        <h3>{{defaultMorphologicalDataCollection.name}}</h3>\n"+"\t\t\t\t        <p>\n"+"\t\t\t\t        \t<b>Number of items: </b> {{defaultMorphologicalDataCollection.items.length}}\n"+"\t\t\t\t        </p>\n"+'\t\t\t        \t<div class="btn-group">\n'+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.showSection = 0;morphologicalDataCollection.select(defaultMorphologicalDataCollection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-refresh"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\n"+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="csv.export(defaultClinicalDataCollection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-download"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t \n"+"\t\t\t\t\t\t</div>\n"+"\t\t\t\t      </div>\n"+"\t\t\t\t    </div>\n"+"\t\t\t\t</div>\n"+"\t\t\t</div>\n"+'\t\t\t<div class="col-sm-6 col-md-4" ng-repeat="collection in morphologicalDataCollection.collections">\n'+'\t\t\t\t<div ng-class="morphologicalDataCollection.collectionsProperties[collection._id].class">\n'+'\t\t\t\t    <div class="thumbnail">\n'+'\t\t\t\t    \t<!-- <img src="" alt=""> -->\n'+'\t\t\t\t      <div class="caption">\n'+"\t\t\t\t        <h3>{{collection.name}}</h3>\n"+"\t\t\t\t        <p>\n"+"\t\t\t\t        \t<b>Number of items: </b> {{collection.items.length}}\n"+"\t\t\t\t        </p>\n"+'\t\t\t        \t<div class="btn-group">\n'+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.section = 0;morphologicalDataCollection.select(collection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-eye-open"></span>\n'+"\t\t\t\t\t\t </button>\n"+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.section = 1;morphologicalDataCollection.select(collection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-plus-sign"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\n"+'\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="csv.export(collection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-download"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\n"+'\t\t\t\t\t\t <button type="button" class="btn btn-danger" ng-click="morphologicalDataCollection.delete(collection)">\n'+'\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n'+"\t\t\t\t\t\t </button>\n"+"\n"+"\t\t\t\t\t\t</div>\n"+"\t\t\t\t      </div>\n"+"\t\t\t\t    </div>\n"+"\t\t\t\t</div>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+"\t</div>\n"+'\t<div class="panel panel-default" ng-if="morphologicalDataCollection.section != -1">\n'+'  \t\t<div class="panel-body">\n'+'\t\t\t<div class="row" ng-if="morphologicalDataCollection.section == 0">\n'+'\t\t\t\t<div class="panel panel-default">\n'+'\t\t  \t\t\t<div class="panel-body">\n'+'\t\t  \t\t\t\t<table st-table="morphologicalDataCollection.displayedCollection" st-safe-src="morphologicalDataCollection.selectedCollectionData" class="table table-striped">\n'+"\t\t\t\t\t\t\t<thead>\n"+"\t\t\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t\t\t<th ng-repeat="key in morphologicalDataCollection.selectedCollectionDataKeys" st-sort="{{key}}" ng-if="key != \'scope\'">{{key}}</th>\n'+"\t\t\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t\t\t<th ng-repeat="key in morphologicalDataCollection.selectedCollectionDataKeys" ng-if="key != \'scope\'">\n'+'\t\t\t\t\t\t\t\t\t\t<input st-search="{{key}}" placeholder="search for {{key}}" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t\t</thead>\n"+"\t\t\t\t\t\t\t<tbody>\n"+'\t\t\t\t\t\t\t\t<tr ng-repeat="row in morphologicalDataCollection.displayedCollection">\n'+'\t\t\t\t\t\t\t\t\t<td ng-repeat="key in morphologicalDataCollection.selectedCollectionDataKeys" ng-if="key != \'scope\'">\n'+"\t\t\t\t\t\t\t\t\t\t<div ng-if=\"_.isArray(row[key]) && key == 'attachments'\">\n"+'\t\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-default" ng-repeat="att in row[key]" ng-click="morphologicalData.viewAttachment(row, att)">\n'+'\t\t\t\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-eye"></span>{{att}}\n'+"\t\t\t\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t\t\t\t\t\n"+"\t\t\t\t\t\t\t\t\t\t</div>\n"+'\t\t\t\t\t\t\t\t\t\t<div ng-if="!_.isArray(row[key])">\n'+"\t\t\t\t\t\t\t\t\t\t\t{{row[key]}}\n"+"\t\t\t\t\t\t\t\t\t\t</div>\n"+"\t\t\t\t\t\t\t\t\t\t<div ng-if=\"_.isArray(row[key]) && key != 'attachments'\">\n"+"\t\t\t\t\t\t\t\t\t\t\t<ul>\n"+'\t\t\t\t\t\t\t\t\t\t\t\t<li ng-repeat="item in row[key]" ng-if="key == \'owners\'">{{item.user}}</li>\n'+'\t\t\t\t\t\t\t\t\t\t\t\t<!-- <li ng-repeat="item in row[key]" ng-if="key != \'owners\'">{{item}}</li> -->\n'+"\t\t\t\t\t\t\t\t\t\t\t</ul>\n"+"\t\t\t\t\t\t\t\t\t\t</div>\n"+"\t\t\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger" ng-click="morphologicalData.delete(row)">\n'+'\t\t\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>\n'+"\t\t\t\t\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t\t</tbody>\n"+"\t\t\t\t\t\t</table>\n"+"\n"+'\t\t\t\t\t\t<directive-threejs data="morphologicalData.surface" height="400">\n'+"\t\t\t\t\t\t</directive-threejs>\n"+"\t\t  \t\t\t</div>\n"+"\t\t  \t\t</div>\n"+"\t\t\t</div>\n"+"\n"+'\t\t\t<div class="row" ng-if="morphologicalDataCollection.section == 1">\n'+'\t\t\t\t<div class="panel panel-default">\n'+'\t\t  \t\t\t<div class="panel-body">\n'+'\t\t  \t\t\t\t<div class="panel panel-success">\n'+'\t\t\t\t\t\t  <div class="panel-body">\n'+'\t\t\t\t\t\t  \t<div class="btn-group">\n'+'\t\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalDataCollection.addMorphologicalData();morphologicalDataCollection.section = -1">\n'+'\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-plus"></span>Upload\n'+"\t\t\t\t\t\t\t\t </button>\n"+'\t\t\t\t\t\t\t\t <button type="button" class="btn btn-default" ng-click="morphologicalData.clear();morphologicalDataCollection.section = -1">\n'+'\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-remove"></span>Cancel\n'+"\t\t\t\t\t\t\t\t </button>\n"+"\t\t\t\t\t\t  \t</div>\n"+"\t\t\t\t\t\t  \n"+'\t\t\t\t\t\t  \t<div class="input-group">\n'+'\t\t\t\t\t  \t\t\t<span class="input-group-addon">Id</span>\n'+'\t\t\t\t\t  \t\t\t<input type="string" class="form-control" placeholder="Patient id (required)" aria-describedby="basic-addon3" ng-model="morphologicalData.data.patientId" ng-readonly="editFields">\n'+"\t\t\t\t\t  \t\t</div>\n"+'\t\t\t\t\t\t  \t<div class="input-group">\n'+'\t\t\t\t\t  \t\t\t<span class="input-group-addon">Date</span>\n'+'\t\t\t\t\t  \t\t\t<input type="date" class="form-control" aria-describedby="basic-addon3" ng-model="morphologicalData.data.date">\n'+"\t\t\t\t\t  \t\t</div>\n"+'\t\t\t\t\t  \t\t<div class="input-group">\n'+'\t\t\t\t\t\t  \t\t<label class="btn btn-default" for="clinicalData-file-selector" ng-click="morphologicalData.selectedForm = -1;">\n'+'\t\t\t\t\t\t\t\t \t<span class="glyphicon glyphicon-folder-open"></span>\n'+'\t\t\t\t\t\t\t\t    <input id="clinicalData-file-selector" file-model=\'morphologicalData.data.file\' type="file"  style="display:none;">\n'+"\t\t\t\t\t\t\t\t</label>\n"+"\t\t\t\t\t\t\t</div>\n"+'\t\t\t\t\t\t\t<div class="input-group">\n'+'\t\t\t\t\t  \t\t\t<span class="input-group-addon">Filename</span>\n'+'\t\t\t\t\t  \t\t\t<input type="text" class="form-control" placeholder="No file selected" aria-describedby="basic-addon3" ng-model="morphologicalData.data.file.name" readonly>\n'+"\t\t\t\t\t  \t\t</div>\n"+"\t\t\t\t\t\t  </div>\n"+"\t\t\t\t\t\t</div>\n"+"\t\t  \t\t\t</div>\n"+"\t\t  \t\t</div>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+"\t</div>\n"+"</div>")}]);
//# sourceMappingURL=data-collections.min.js.map